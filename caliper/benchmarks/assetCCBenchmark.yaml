test:
  name: supplychain-contract-bechmark
  description: "Supplychain contract benchmark"
  workers:
    type: local
    number: 1
  rounds:
    - label: createProduct
      description: "Create product"
      txNumber: 1
      rateControl:
        { type: "linear-rate", opts: { startingTps: 5, finishingTps: 20 } }
      workload:
        module: workload/createProduct.js
        arguments: 
          contractId: supplychain
    - label: shipProductTo
      description: "Ship product to a new location"
      txNumber: 1
      rateControl:
        { type: "linear-rate", opts: { startingTps: 5, finishingTps: 20 } }
      workload:
        module: workload/shipProductTo.js
        arguments: 
          contractId: supplychain
    - label: getProduct
      description: "Get product details"
      txNumber: 1
      rateControl:
        { type: "linear-rate", opts: { startingTps: 5, finishingTps: 20 } }
      workload:
        module: workload/getProduct.js
        arguments: 
          contractId: supplychain
    - label: getAllProducts
      description: "Get all products"
      txNumber: 1
      rateControl:
        { type: "linear-rate", opts: { startingTps: 5, finishingTps: 20 } }
      workload:
        module: workload/getAllProducts.js
        arguments: 
          contractId: supplychain
    - label: getProductWithHistory
      description: "Get product with history"
      txNumber: 1
      rateControl:
        { type: "linear-rate", opts: { startingTps: 5, finishingTps: 20 } }
      workload:
        module: workload/getProductWithHistory.js
        arguments: 
          contractId: supplychain

monitors:
  resource:
    - module: docker
      options:
        interval: 4
        containers:
          ["/peer0.org1.example.com",
          "/peer0.org2.example.com",
          "/orderer.example.com"]